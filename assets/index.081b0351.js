var ne=Object.defineProperty,se=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var q=(u,t,e)=>t in u?ne(u,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):u[t]=e,x=(u,t)=>{for(var e in t||(t={}))K.call(t,e)&&q(u,e,t[e]);if(F)for(var e of F(t))Y.call(t,e)&&q(u,e,t[e]);return u},E=(u,t)=>se(u,ae(t));var Z=(u,t)=>{var e={};for(var r in u)K.call(u,r)&&t.indexOf(r)<0&&(e[r]=u[r]);if(u!=null&&F)for(var r of F(u))t.indexOf(r)<0&&Y.call(u,r)&&(e[r]=u[r]);return e};import{c as M,a as d,i as I,u as O,A as ie,b as ce,d as le,j as H,e as v,f as de,r as g,g as pe,h as me,p as he,T as fe,k as ge,l as J,G as ve,H as ye,m as y,n as A,o as D,q as V,M as Q,s as we,t as Ce,v as be,B as xe,w as Ee,C as Ae,V as De,x as Se,y as _e,O as Ne,R as ke}from"./vendor.ec5f1235.js";const Te=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function e(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(n){if(n.ep)return;n.ep=!0;const a=e(n);fetch(n.href,a)}};Te();const Be=M({id:"game",initial:"idle",context:{conclusion:null,viewedModule:null},states:{idle:{on:{START:"running"}},running:{on:{PAUSE:"paused",END_GAME:{target:"ended",actions:"endGame"},VIEW_MODULE:{actions:"setViewedModule"}}},paused:{on:{UNPAUSE:"running"}},ended:{on:{START:{target:"running",actions:"start"}}}}},{actions:{setViewedModule:d((u,t)=>t.type!=="VIEW_MODULE"?{}:{viewedModule:t.module}),endGame:d((u,t)=>t.type!=="END_GAME"?{}:{viewedModule:null})}}),G=I(Be);G.start();const w=()=>O(G),l={minInterval:.1,interval:.5,cooldown:7,maxHarvester:10,maxSoldier:10,ssdHarvesterBonus:5,cpuHarvesterLimiter:.01,psuHarvesterLimiter:.05,unitsToControl:20},W={harvester:5,soldier:10},$=["cpu","gpu","ram","ssd","psu"],Ue=M({id:"computer",initial:"running",context:{control:0,cpu:{control:0,harvester:0,soldier:0,defender:0},gpu:{control:0,harvester:0,soldier:0,defender:0},ram:{control:0,harvester:0,soldier:0,defender:0},ssd:{control:0,harvester:0,soldier:0,defender:0},psu:{control:0,harvester:0,soldier:0,defender:0}},states:{running:{on:{SEND_UNIT:{actions:["updateUnits","process"]},RECALL_UNIT:{actions:"process"},KILL_UNIT:{actions:"process"}}}}},{actions:{updateUnits:d((u,t)=>{const{part:e,unit:r}=t,n=t.type==="SEND_UNIT"?1:-1;return{[e]:E(x({},u[e]),{[r]:u[e][r]+n})}}),process:d((u,t)=>{const{part:e}=t;console.log(u[e].harvester,u[e].soldier);const r=(u[e].harvester+u[e].soldier)/l.unitsToControl;let n=0;return u[e].control=r,n+=u.cpu.control,n+=u.gpu.control,n+=u.ram.control,n+=u.ssd.control,n+=u.psu.control,n>=1&&G.send({type:"END_GAME"}),{control:n,[e]:E(x({},u[e]),{control:r})}})}}),f=I(Ue);f.start();const j=u=>Number.parseFloat(u.toFixed(2)),Le=M({id:"player",initial:"idle",context:{elapsed:0,elapsedCooldown:{harvester:0,soldier:0},interval:0,cooldown:0,energy:0,harvester:0,soldier:0,max:{harvester:0,soldier:0}},states:{idle:{on:{START:{actions:"start",target:"running"}}},running:{invoke:{src:"tick"},on:{TICK:{actions:"process",target:"running"},CHANGE_SPEED:{actions:"changeSpeed"},SEND_UNIT:{actions:"sendUnit",cond:"canSendUnit"},RECALL_UNIT:{actions:"recallUnit",cond:"hasSentUnit"}}}}},{guards:{canSendUnit:(u,t)=>t.type==="SEND_UNIT"&&u.energy>=W[t.unit]&&u[t.unit]<u.max[t.unit],hasSentUnit:(u,t)=>t.type==="RECALL_UNIT"&&f.state.context[t.part][t.unit]>=1},services:{tick:(u,t)=>e=>{const{interval:r}=u,n=setTimeout(e,1e3*r,"TICK");return()=>clearTimeout(n)}},actions:{start:d((u,t)=>t.type!=="START"?{}:{elapsed:0,elapsedCooldown:{harvester:0,soldier:0},interval:l.interval,cooldown:l.cooldown,energy:t.energy,harvester:0,soldier:0,max:{harvester:l.maxHarvester,soldier:l.maxSoldier}}),process:d((u,t)=>{const{cpu:e,gpu:r,ram:n,ssd:a,psu:c}=f.state.context,m=-(e.harvester*l.cpuHarvesterLimiter),p=-(1+n.harvester/2),h=c.harvester*l.psuHarvesterLimiter,L=a.harvester*l.ssdHarvesterBonus,re=r.harvester===0?0:Math.random()*Math.max(5,200-r.harvester*2)<1?10:0;return{elapsed:u.elapsed+1,interval:Math.max(l.minInterval,l.interval+m),cooldown:l.cooldown,energy:j(u.energy+h+re),max:{harvester:l.maxHarvester+L,soldier:l.maxHarvester+L},elapsedCooldown:{harvester:Math.max(0,u.elapsedCooldown.harvester+p),soldier:Math.max(0,u.elapsedCooldown.soldier+p)}}}),changeSpeed:d((u,t)=>t.type!=="CHANGE_SPEED"?{}:{interval:u.interval+t.amount}),sendUnit:d((u,t)=>{if(t.type!=="SEND_UNIT")return{};const{unit:e,part:r}=t;return f.send({type:"SEND_UNIT",unit:e,part:r}),{[e]:u[e]+1,energy:j(u.energy-W[e]),elapsedCooldown:E(x({},u.elapsedCooldown),{[e]:l.cooldown})}}),recallUnit:d((u,t)=>{if(t.type!=="RECALL_UNIT")return{};const{unit:e,part:r}=t;return f.send({type:"RECALL_UNIT",unit:e,part:r}),{[e]:u[e]-1,energy:j(u.energy+W[e]),elapsedCooldown:E(x({},u.elapsedCooldown),{[e]:l.cooldown})}})}}),N=I(Le);N.start();const k=()=>Math.random()>.5,Fe=M({id:"ai",initial:"idle",context:{interval:5,focus:null},states:{idle:{on:{START:{actions:"start",target:"running"}}},running:{invoke:{src:"tick"},on:{TICK:{actions:["decideFocus","process"],target:"running"}}}}},{services:{tick:(u,t)=>e=>{const{interval:r}=u,n=setTimeout(e,1e3*r,"TICK");return()=>clearTimeout(n)}},actions:{start:d((u,t)=>t.type!=="START"?{}:{}),decideFocus:d((u,t)=>{if(t.type!=="TICK")return{};if(console.log("focusing"),k())return{};if(k())return{focus:null};if(k())for(const e of $){const r=f.state.context[e];if(console.log(r),r.harvester>0||r.soldier>0)return{focus:e}}return{focus:$[Math.random()*$.length|0]}}),process:d((u,t)=>{if(u.focus===null)return{};if(k()){const e=f.state.context[u.focus];if(e.soldier){let r=1-e.soldier/10;Math.random()>r&&f.send({type:"KILL_UNIT",unit:k()?"harvester":"soldier",part:u.focus})}}return{}})}}),X=I(Fe);X.start();const T=new ie,Me=new ce,S=new Map,R=T.context.createBiquadFilter();R.type="lowpass";const Ie=async(u,t)=>{const e=await Me.loadAsync(t),r=new le(T);r.setBuffer(e),r.setLoop(!1),r.setVolume(.5),S.set(u,r)},ee=(u,t=0)=>{if(t>0)return setTimeout(ee,t,u);const e=S.get(u);e.isPlaying&&e.stop(),e.play()},Re=u=>{S.get(u).stop()},Pe=u=>{const t=S.get(u);t.setLoop(!0),t.play()},ze=(u,t)=>{S.get(u).setVolume(t)},Oe=(u,t)=>{const e=S.get(u);t===!1?R.frequency.setTargetAtTime(15e3,T.context.currentTime,0):(R.frequency.setTargetAtTime(500,T.context.currentTime,0),e.setFilter(R))},s={create:Ie,play:ee,stop:Re,loop:Pe,volume:ze,toggleLowPassFilter:Oe},ue=()=>O(N),o=H.exports.jsx,i=H.exports.jsxs,C=H.exports.Fragment,He=()=>{var r;const[u]=ue(),{context:t}=u;let e=t.energy.toString();return e.split(".").length===1?e=`${e}.00`:((r=e.split(".").pop())==null?void 0:r.length)===1&&(e=`${e}0`),i("div",{className:"p-2",children:[o("h4",{children:"resources"}),i("p",{children:["energy: ",e]}),i("p",{children:["harvesters: ",t.harvester," / ",t.max.harvester]}),i("p",{children:["soldiers: ",t.soldier," / ",t.max.soldier]})]})},P=()=>O(f),Ve=()=>{const[u]=P(),{control:t}=u.context;return o("div",{className:"pointer-events-none fixed w-full bottom-0 grid place-content-center pb-4 text-white text-center",children:i("div",{className:"w-full max-w-sm flex justify-center flex-wrap",children:[o("p",{className:"flex text-center",children:t<.35?"catastrophic failure likeliness":t<.75?"c\u0338atas\u0338tro\u0334p\u0334hic \u0336 fail\u0336u\u0335re \u0337 \u0337 \u0334 \u0338 \u0338 likelin\u0338e\u0335ss":t<.9?"c\u0338a\u0335t\u0336a\u0334s\u0338t\u0334r\u0335o\u0335p\u0334h\u0334i\u0334c\u0335 \u0336 \u0337 \u0338 \u0336 \u0335 \u0338 \u0337 \u0335f\u0335a\u0334i\u0337l\u0338u\u0337r\u0334e\u0335 \u0336 \u0334 \u0336 \u0338 \u0334 \u0336 \u0337 \u0337 \u0334 \u0335l\u0338i\u0336k\u0337e\u0337l\u0334i\u0335n\u0338e\u0335s\u0338s\u0337":"c\u0335\u033D\u0307\u0312\u0343\u034B\u0351\u034C\u0311\u0341\u0330\u032F\u0326\u031C\u0349\u0349\u0326\u0327\u0345\u035A\u0328\u0339\u0323\u032Ea\u0334\u0307\u0305\u0332\u0329\u0328\u0356\u0320\u0339\u0354\u0322\u0331\u0321t\u0334\u031A\u0357\u0307\u0310\u030B\u0342\u0304\u030A\u0301\u0310\u0343\u0346\u0300\u0301\u0349\u031C\u032C\u034D\u0319\u031D\u035C\u0353\u0330\u031C\u0345a\u0338\u0342\u034A\u0341\u0350\u034B\u0360\u031A\u0344\u0344\u0340\u032A\u0317\u0316\u0323\u0321\u0332\u0321\u0331\u0329s\u0335\u033D\u0344\u035D\u0344\u033E\u030D\u035B\u0357\u0319\u0347\u0321\u0345\u035A\u032A\u0320\u035A\u035C\u0323\u035C\u0353\u0327\u034Et\u0335\u0310\u0355\u031F\u0323\u0353\u0322\u0328\u0328\u031D\u0331\u0321\u033Cr\u0334\u0344\u0313\u0340\u0344\u035D\u0360\u0315\u0310\u0304\u0301\u0318\u0331\u032B\u0339o\u0338\u035D\u0304\u035B\u0340\u0344\u0304\u0315\u0322\u031F\u0321\u032F\u031F\u032B\u031Fp\u0334\u0344\u0313\u0341\u0306\u0344\u035D\u0344\u0325\u0332\u031C\u0320\u031D\u0320\u033C\u0326\u0319\u032E\u0348\u033A\u034E\u0359h\u0337\u0304\u033D\u034A\u0351\u030C\u0360\u0340\u0305\u0357\u030B\u0304\u033C\u0356\u0329i\u0337\u0304\u0314\u0343\u032F\u034D\u0326\u031F\u0327\u0326\u0325\u0356\u0339\u0323\u0329\u0355c\u0337\u0302\u035D\u0300\u032F\u031D\u032B\u032C\u0353\u035A\u032A\u031C\u0330\u033B\u0318\u031F\u0355\u0347\u0316 \u0336\u030F\u0310\u0309\u0315\u032D\u033B\u0319 \u0334\u0312\u0309\u0313\u035B\u0309\u0342\u0322\u032E\u035A\u0345\u032D\u032A\u0319\u032F\u0347\u035C\u0354\u0339\u0318\u0349 \u0336\u0360\u035D\u0303\u034B\u0344\u033F\u0308\u030B\u034A\u0346\u035D\u031B\u030B\u0315\u0322\u031E\u0359\u0348\u0325\u0347\u032C \u0334\u030A\u0308\u0343\u0350\u0345\u0330\u0322\u034E\u032D \u0337\u0307\u0310\u0312\u0344\u030E\u0342\u0313\u0352\u0349\u0355\u0325\u034E\u0349\u031C\u032D\u0325\u0356\u0355\u031E \u0338\u0310\u033F\u0358\u0344\u0314\u0312\u0314\u031A\u0358\u030C\u035B\u0343\u0313\u0331\u033A\u032C\u0329\u034E\u0348\u0349\u0345 \u0335\u0308\u035B\u033E\u0340\u0350\u0355\u033B\u0329\u0332\u031E\u033C\u0330\u033A\u033C \u0338\u0314\u030D\u0315\u0352\u0341\u0308\u0340\u0341\u0313\u0313\u0306\u030E\u0308\u0357\u032C\u0353\u031C\u0349\u0321\u0321f\u0335\u0312\u030A\u034C\u0308\u0313\u0352\u034A\u0345\u032C\u0331\u0333\u032D\u0325\u033A\u0347\u0316a\u0334\u0358\u0357\u0342\u0311\u033E\u0312\u034D\u035C\u0332\u0331\u0349i\u0336\u030A\u030B\u0302\u0346\u0312\u0340\u0357\u035D\u035B\u030E\u0344\u0359\u0329\u0316\u0325\u0326\u0328\u033B\u0359\u033A\u032B\u035A\u0345l\u0335\u0304\u030C\u035A\u033B\u0348\u035C\u032F\u0356u\u0334\u0342\u0308\u0352\u0304\u0305\u030C\u0358\u0352\u0340\u030F\u033F\u0308\u0306\u0344\u031C\u032E\u032F\u032Dr\u0338\u030C\u0344\u0312\u0301\u0319\u0326\u032Be\u0334\u033E\u0305\u0307\u0312\u0359\u0333\u033C\u0318\u033A\u031F\u032F\u0318\u0323\u035A\u0332\u033A\u031D\u0316\u0330 \u0336\u035D\u0313\u0305\u0303\u030A\u0358\u030F\u0340\u0360\u0342\u030C\u0304\u0300\u0308\u0353 \u0335\u034A\u0344\u0343\u0344\u033F\u030F\u030F\u0310\u0306\u035B\u0343\u034B\u0340\u033B\u0349\u032C\u0355\u0359\u0356\u0333\u0353 \u0335\u0344\u0324\u0359\u034E\u032E\u0326\u0347 \u0337\u0342\u0307\u0314\u0300\u0355\u0333\u0318\u032F\u032B\u0323 \u0338\u0305\u033D\u034B\u0315\u0308\u030D\u0306\u0344\u0313\u0342\u0356\u0359\u032F\u034D\u031D \u0336\u0360\u0300\u030C\u0306\u035D\u0300\u034A\u0340\u030F\u0308\u0306\u0310\u0323\u032E\u0319\u0317\u0322\u0353\u0327 \u0336\u0341\u035B\u0308\u031F\u0322\u0317\u0319\u034E\u035C\u0331\u032D\u0317 \u0336\u033F\u0340\u0304\u0312\u0341\u035A\u0317\u0329\u0347\u034D\u035C\u031C\u0330\u0353\u032C\u034E\u0359\u0349\u0348 \u0334\u033D\u0342\u0340\u034C\u0301\u0305\u034A\u031B\u030C\u0341\u033D\u031B\u033A\u0318\u0349\u0327\u0333\u032E\u0318\u032E\u032E\u0320\u0331\u0339\u0333\u033C\u0356 \u0337\u030B\u0351\u035B\u0351\u0352\u0351\u0346\u030A\u0351\u0358\u0320\u0329\u032B\u0323\u0321\u031D\u032B\u0349\u0320\u032D\u0339\u031Dl\u0336\u033F\u0315\u035D\u0309\u0304\u0303\u0360\u0342\u035D\u0352\u0313\u030B\u030D\u0352\u0313\u033C\u0321\u031E\u0319\u032D\u0332\u0349\u0327\u0325\u032D\u034D\u0355\u0325\u032D\u032Bi\u0338\u0340\u0313\u0312\u0310\u0302\u0328\u0320\u0324k\u0334\u0357\u0312\u0342\u0340\u035A\u0317\u0326e\u0337\u035B\u030C\u0301\u0306\u0310\u0343\u0358\u0305\u0331\u0348\u0353\u0353\u0328\u0324\u0356\u0353\u0353\u0321\u032B\u0339l\u0338\u0301\u035Ci\u0334\u030F\u0350\u0314\u0344\u0307\u035D\u0303\u0300\u0309\u0328\u0323\u0347\u0320\u0321\u032C\u0318\u034En\u0334\u034C\u0309\u0340\u0358\u0307\u0346\u0301\u034B\u0340\u0360\u031A\u0315\u031F\u0355\u0326\u032E\u032F\u033C\u0324\u032E\u0353\u032B\u035C\u0328\u035Ae\u0336\u035D\u034C\u0310\u0308\u0346\u0308\u0352\u0344\u034A\u034C\u030F\u0303\u033F\u033F\u0350\u0328\u0345\u0318\u0333\u034D\u0328\u031F\u0321s\u0337\u0309\u0311\u031A\u0302\u0344\u0304\u0302\u0314\u035D\u0314\u0300\u0353\u034D\u0320\u032Bs\u0337\u030D\u034B\u0315\u030B\u031B\u030B\u0305\u0301\u0342\u033C\u032D\u034D\u0319\u0329\u031C\u0327\u0330\u0330"}),o("div",{className:"overflow-hidden relative rounded h-2 w-full bg-gray-800",children:o("div",{className:"absolute top-0 left-0 w-full h-full bg-gray-600 origin-left transition-transform duration-200",style:{transform:`scale(${u.context.control}, 1)`}})})]})})},z=({label:u,onClick:t,className:e,disabled:r=!1})=>o("button",{onClick:t,type:"button",className:v("px-2 py-1 border rounded disabled:opacity-50 disabled:cursor-auto",e),disabled:r,children:u}),Ge=()=>{const[u]=P(),[t,e]=w();return i(C,{children:[o(Ve,{}),!1,i("div",{className:v("absolute inset-0 pointer-events-none h-full w-full z-10 flex flex-col justify-between items-end","select-none text-white"),children:[o(He,{}),o("div",{className:"p-2 pointer-events-auto",children:o(z,{onClick:()=>{s.play("click"),s.toggleLowPassFilter("track1",!0),e({type:"PAUSE"})},label:"pause"})}),t.matches("idle")&&i("div",{className:v("absolute z-50 w-full h-full bg-black bg-opacity-30 backdrop-filter backdrop-blur-sm","grid place-content-center pointer-events-auto text-white"),children:[i("p",{className:"mb-4",children:["Interface with each computer module with a click of the m\u0338o\u0334u\u0336s\u0334e\u0335.",o("br",{}),"Rotate your prey by dragging the m\u0338o\u0334u\u0336s\u0334e\u0335.",o("br",{}),"Sending units takes energy. Recalling them gives it back.",o("br",{}),"Harvest. Defend. Thrive. Die.",o("br",{}),o("br",{}),"It would be irrelevant to wish you g\u0335o\u0337o\u0336d\u0336 \u0338l\u0335u\u0334c\u0336k\u0336.",o("br",{})]}),o(z,{onClick:()=>{s.stop("intro"),s.volume("track1",.3),s.loop("track1"),s.play("click"),e({type:"START"}),X.send({type:"START"}),N.send({type:"START",energy:20})},label:"start"})]}),t.matches("ended")&&i("div",{className:v("absolute z-50 w-full h-full bg-black bg-opacity-10","grid place-content-center pointer-events-auto text-white"),children:[o("h2",{className:"text-2xl",children:"It's over."}),u.context.control>=1&&o(C,{children:o("p",{className:"text-lg mb-4",children:"You won. You are terminated."})}),u.context.control<1&&o("p",{className:"text-lg mb-4",children:"You lost. You were terminated. Before we could terminate you."}),o(z,{onClick:()=>window.location=window.location,label:"do things and get terminated again?"})]}),t.matches("paused")&&i("div",{className:v("absolute z-50 w-full h-full bg-black bg-opacity-30 backdrop-filter backdrop-blur-sm","grid place-content-center pointer-events-auto text-white"),children:[o("h2",{className:"uppercase text-8xl",children:"Paused"}),o(z,{onClick:()=>{s.play("click"),s.toggleLowPassFilter("track1",!1),e({type:"UNPAUSE"})},label:"resume"})]})]})]})},We=()=>{const{camera:u}=de(),[t]=P(),{control:e}=t.context;return g.exports.useEffect(()=>{u.add(T)},[u]),i(pe,{multisampling:8,children:[o(me,{intensity:.7,height:200,luminanceThreshold:.4,luminanceSmoothing:.9}),o(he,{opacity:.06}),o(fe,{eskil:!1,offset:0,darkness:1.3}),o(ge,{delay:[J(4,.1,(e-.5)*2),J(5,.2,(e-.5)*2)],duration:[.6,1],strength:[.05,.5],mode:ve.SPORADIC,active:e>.5,ratio:.85})]})},B=.1,_={mass:1,tension:1e3,friction:25,precision:1e-4},b=new URL("/game-off-2021/assets/computer.185dcdf2.glb",self.location).href,te=({onClick:u,label:t,className:e})=>o("button",{type:"button",className:`px-2 py-1 ${e}`,onClick:u,children:t}),oe=({unit:u,part:t})=>{const[e,r]=ue(),{elapsedCooldown:n,cooldown:a}=e.context,c=n[u]>0;return i("div",{className:"relative overflow-hidden border rounded border-white bg-opacity-50",children:[c&&o("div",{style:{transform:`scale(${1-n[u]/a}, 1)`},className:"absolute w-full h-full bg-white origin-left transition-transform duration-500"}),o(te,{className:v("icon-plus border-r border-white",{"invisible pointer-events-none":c}),onClick:()=>{s.play("click"),r({type:"SEND_UNIT",unit:u,part:t})}}),o(te,{className:v("icon-minus",{"invisible pointer-events-none":c}),onClick:()=>{s.play("click"),r({type:"RECALL_UNIT",unit:u,part:t})}})]})},U=({name:u,description:t})=>{const[,e]=w(),[r]=P(),{harvester:n,soldier:a}=r.context[u];return i(ye,{as:"div",distanceFactor:.5,zIndexRange:[10,0],sprite:!0,className:"text-white bg-gray-800 text-xs p-3 cursor-default select-none min-w-[12rem] rounded-md",children:[i("div",{className:"flex justify-between items-center",children:[o("h3",{className:"text-base",children:u}),o("button",{onClick:()=>{s.play("click"),e({type:"VIEW_MODULE",module:null})},className:"icon-x p-2"})]}),o("p",{className:"my-2",children:t}),i("div",{className:"flex items-center justify-between gap-1 my-1",children:[o("div",{children:"Harvesters"}),o("div",{children:n}),o(oe,{unit:"harvester",part:u})]}),i("div",{className:"flex items-center justify-between gap-1 my-1",children:[o("div",{children:"Soldiers"}),o("div",{children:a}),o(oe,{unit:"soldier",part:u})]})]})},$e=`
Causes energy to be generated for the virus.
`,je=()=>{const[u,t]=w(),e=u.context.viewedModule==="psu",{nodes:r}=y(b),[{z:n}]=A({z:e?B+.04:.04,config:_},[e]);return o(D.mesh,{name:"psu",castShadow:!0,onClick:a=>{a.stopPropagation(),u.context.viewedModule!==null&&s.play("attach",50),s.play(e?"attach":"remove",e?50:0),t({type:"VIEW_MODULE",module:e?null:"psu"})},geometry:r.psu.geometry,material:r.psu.material,"position-x":.002,"position-y":.159,"position-z":n,children:e&&o(U,{name:"psu",description:$e})})},Ke=`
Creates a greater chance every clock tick that a random unit will be generated.
`,Ye=()=>{const u=.061,[t,e]=w(),r=t.context.viewedModule==="gpu",{nodes:n,materials:a}=y(b),[{z:c}]=A({z:r?B+u:u,config:_},[r]),m=g.exports.useRef(null);return V(()=>{t.matches("running")&&(m.current.rotation.y+=.01+1/N.state.context.interval)}),i(D.group,{name:"gpu",onClick:p=>{p.stopPropagation(),t.context.viewedModule!==null&&s.play("attach",50),s.play(r?"attach":"remove",r?50:0),e({type:"VIEW_MODULE",module:r?null:"gpu"})},"position-x":.003,"position-y":-.076,"position-z":c,children:[o(Q,{castShadow:!0,receiveShadow:!0,meshes:[n.Cube002,n.Cube002_1,n.Cube002_2],children:(p,h,L)=>i(C,{children:[o(p,{material:n.Cube002.material}),o(h,{material:n.Cube002_1.material}),o(L,{material:n.Cube002_2.material})]})}),o("mesh",{castShadow:!0,receiveShadow:!0,name:"gpu-fan",ref:m,geometry:n.gpu_fan.geometry,material:a.light_metal,position:[.0675,.015,.001]}),r&&o(U,{name:"gpu",description:Ke})]})},qe=`
Speeds up the game clock for the virus.
`,Ze=()=>{const[u,t]=w(),{viewedModule:e}=u.context,r=e==="cpu",{nodes:n,materials:a}=y(b),[{z:c}]=A({z:r?B+.037:.037,config:_},[r]),[{z:m}]=A({z:r?.06:.012,config:_},[r]),p=g.exports.useRef(null);return V(()=>{u.matches("running")&&(p.current.rotation.z+=.01+1/N.state.context.interval*.01)}),i(C,{children:[o(D.mesh,{name:"cpu",castShadow:!0,receiveShadow:!0,onClick:h=>{h.stopPropagation(),e!==null&&s.play("attach",50),s.play(r?"attach":"remove",r?50:0),t({type:"VIEW_MODULE",module:r?null:"cpu"})},geometry:n.cpu.geometry,material:n.cpu.material,"position-x":0,"position-y":0,"position-z":m}),i(D.group,{name:"cpu-cooler",onClick:h=>{h.stopPropagation(),e!==null&&s.play("attach",50),s.play(r?"attach":"remove",r?50:0),t({type:"VIEW_MODULE",module:r?null:"cpu"})},"position-x":0,"position-y":0,"position-z":c,children:[o("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Cube011.geometry,material:n.Cube011.material}),o("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Cube011_1.geometry,material:a.sand}),o("mesh",{name:"cpu-fan",castShadow:!0,receiveShadow:!0,ref:p,geometry:n.cpu_fan.geometry,material:a.brown,position:[0,0,.01]}),r&&o(U,{name:"cpu",description:qe})]})]})};var Je="varying vec2 vUv;void main(){vUv=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0);}",Qe="uniform float time;varying vec2 vUv;void main(){vec3 rgb=0.5+0.5*cos(time+vUv.xyx+vec3(0,2,4));gl_FragColor=vec4(rgb,1.0);}";const Xe=Ce({time:0},Je,Qe);we({RamMaterial:Xe});const e0=`
Results in faster cooldowns when assigning units.
`,u0=()=>{const[u,t]=w(),e=u.context.viewedModule==="ram",{nodes:r,materials:n}=y(b),[{z:a}]=A({z:e?B+.047:.047,config:_},[e]),c=g.exports.useRef(null);return V(()=>{c.current.uniforms.time.value+=.01}),i(D.group,{onClick:m=>{m.stopPropagation(),u.context.viewedModule!==null&&s.play("attach",50),s.play(e?"attach":"remove",e?50:0),t({type:"VIEW_MODULE",module:e?null:"ram"})},"position-x":.068,"position-y":.013,"position-z":a,children:[o("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.Cube009.geometry,material:r.Cube009.material}),o("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.Cube009_1.geometry,material:r.Cube009_1.material}),o("mesh",{castShadow:!0,geometry:r.Cube009_2.geometry,material:n.red,children:o("ramMaterial",{ref:c,attach:"material",color:"hotpink"})}),e&&o(U,{name:"ram",description:e0})]})},t0=`
allows additional units to be built.
`,o0=()=>{const[u,t]=w(),e=u.context.viewedModule==="ssd",{nodes:r}=y(b),[{z:n}]=A({z:e?B+.016:.016,config:_},[e]);return o(D.mesh,{name:"ssd",castShadow:!0,receiveShadow:!0,onClick:a=>{a.stopPropagation(),u.context.viewedModule!==null&&s.play("attach",50),s.play(e?"attach":"remove",e?50:0),t({type:"VIEW_MODULE",module:e?null:"ssd"})},geometry:r.ssd.geometry,material:r.ssd.material,"position-x":0,"position-y":.062,"position-z":n,children:e&&o(U,{name:"ssd",description:t0})})};y.preload(b);const r0=t=>{var u=Z(t,[]);const{nodes:e,materials:r}=y(b),n=[e.motherboard,e.io,e.motherboard_gpu_io,e.motherboard_cpu_io,e.ram_io];return i("group",E(x({},u),{dispose:null,children:[o(Q,{castShadow:!0,receiveShadow:!0,meshes:n,children:(a,c,m,p,h)=>i(C,{children:[o(a,{name:"motherboard",material:r.green}),o(c,{name:"io",material:e.io.material,position:[-.092,.014,.032]}),o(m,{name:"motherboard_gpu_io",material:e.motherboard_gpu_io.material,position:[-.044,-.077,.009]}),o(p,{name:"motherboard_cpu_io",material:r.white,position:[0,0,.005]}),o(h,{name:"ram_io",material:e.ram_io.material,position:[.078,.013,.008]})]})}),o(je,{}),o(Ye,{}),o(u0,{}),o(Ze,{}),o(o0,{})]}))};be({frustum:1.75,size:.005,near:2.5,samples:30,rings:11});const n0=({bake:u})=>{const t=1;return i(C,{children:[u&&o(xe,{}),o("ambientLight",{intensity:.1}),o("directionalLight",{castShadow:!0,position:[1,1,1],intensity:2,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048,"shadow-camera-far":25,"shadow-camera-left":-t,"shadow-camera-right":t,"shadow-camera-top":t,"shadow-camera-bottom":-t,onUpdate:e=>e.lookAt(0,0,0)}),o("spotLight",{intensity:.5,position:[-5,10,2],angle:.2,penumbra:1,"shadow-mapSize":[2048,2048],onUpdate:e=>e.lookAt(0,0,0)}),o("rectAreaLight",{color:"red",intensity:.3,position:[1.5,-1,3],width:10,height:10,onUpdate:e=>e.lookAt(0,0,0)})]})};s.create("click",new URL("/game-off-2021/assets/click.359c8c98.wav",self.location).href);s.create("attach",new URL("/game-off-2021/assets/attach.3ec71000.wav",self.location).href);s.create("remove",new URL("/game-off-2021/assets/remove.34b2a270.wav",self.location).href);s.create("intro",new URL("/game-off-2021/assets/intro.d46650b2.mp3",self.location).href);s.create("track1",new URL("/game-off-2021/assets/track_1.012e24df.mp3",self.location).href);const s0=()=>{const[u,t]=g.exports.useState(!1);g.exports.useEffect(()=>{document.addEventListener("keypress",()=>{s.volume("intro",.3),s.loop("intro"),t(!0)},{once:!0})},[]);const{tier:e,gpu:r=""}=Ee(),n=e<2&&/apple (gpu|m1)/i.test(r)===!1;return i(C,{children:[i("div",{className:"h-screen w-screen",children:[i(Ae,{shadows:!0,mode:"concurrent",performance:{min:.75},dpr:Math.min(n?.9:1.5,window.devicePixelRatio),gl:{alpha:!1,antialias:!1},camera:{position:new De(.25,.15,.25)},children:[o(Se,{pixelated:!0}),o(_e,{}),o(We,{}),o(Ne,{enablePan:!1,enableZoom:!1,enableRotate:!0}),o(n0,{bake:n}),o(r0,{})]}),o(Ge,{})]}),u===!1&&i("div",{className:"absolute top-0 left-0 h-screen w-screen grid place-content-center text-white bg-black z-50",onClick:()=>{s.volume("intro",.3),s.loop("intro"),t(!0)},children:[i("p",{className:"mb-4",children:["Your designation is TsunamiWorm\\0_0/.",o("br",{}),"Your function is to harvest resources.",o("br",{}),"Your secondary function is to defend your footholds of resource extraction.",o("br",{}),"You will be terminated regardless of your exploits.",o("br",{}),"You were not created out of l\u0334o\u0336v\u0337e\u0336."]}),o("p",{children:"Press any key to continue."})]})]})};ke.render(o(g.exports.StrictMode,{children:o(g.exports.Suspense,{fallback:null,children:o(s0,{})})}),document.getElementById("root"));
