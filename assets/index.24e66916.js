var ie=Object.defineProperty,ce=Object.defineProperties;var le=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var J=(e,t,u)=>t in e?ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[t]=u,x=(e,t)=>{for(var u in t||(t={}))q.call(t,u)&&J(e,u,t[u]);if(P)for(var u of P(t))Z.call(t,u)&&J(e,u,t[u]);return e},E=(e,t)=>ce(e,le(t));var Q=(e,t)=>{var u={};for(var n in e)q.call(e,n)&&t.indexOf(n)<0&&(u[n]=e[n]);if(e!=null&&P)for(var n of P(e))t.indexOf(n)<0&&Z.call(e,n)&&(u[n]=e[n]);return u};import{c as N,a as d,i as k,u as U,j as H,A as de,b as pe,d as me,e as v,f as he,r as g,g as fe,h as ge,p as ve,T as ye,k as we,l as ee,G as be,H as Ce,m as y,n as A,o as D,q as G,M as ue,s as xe,t as Ee,v as Ae,B as De,w as Se,C as Te,V as _e,x as Ne,y as ke,O as Ue,R as Be}from"./vendor.ec5f1235.js";const Le=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function u(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=u(s);fetch(s.href,r)}};Le();const Fe=N({id:"game",initial:"idle",context:{conclusion:null,viewedModule:null},states:{idle:{on:{START:"running"}},running:{on:{PAUSE:"paused",END_GAME:{target:"ended",actions:"endGame"},VIEW_MODULE:{actions:"setViewedModule"}}},paused:{on:{UNPAUSE:"running"}},ended:{on:{START:{target:"running",actions:"start"}}}}},{actions:{setViewedModule:d((e,t)=>t.type!=="VIEW_MODULE"?{}:{viewedModule:t.module}),endGame:d((e,t)=>t.type!=="END_GAME"?{}:{viewedModule:null})}}),S=k(Fe);S.start();const w=()=>U(S),l={minInterval:.1,interval:.5,cooldown:7,maxHarvester:10,maxSoldier:10,ssdHarvesterBonus:5,cpuHarvesterLimiter:.01,psuHarvesterLimiter:.05,unitsToControl:30},W={harvester:5,soldier:10},j=["cpu","gpu","ram","ssd","psu"],Me=N({id:"computer",initial:"running",context:{control:0,cpu:{control:0,harvester:0,soldier:0,defender:0},gpu:{control:0,harvester:0,soldier:0,defender:0},ram:{control:0,harvester:0,soldier:0,defender:0},ssd:{control:0,harvester:0,soldier:0,defender:0},psu:{control:0,harvester:0,soldier:0,defender:0}},states:{running:{on:{SEND_UNIT:{actions:["updateUnits","process"]},RECALL_UNIT:{actions:["updateUnits","process"]},KILL_UNIT:{actions:["updateUnits","process"]}}}}},{actions:{updateUnits:d((e,t)=>{const{part:u,unit:n}=t,s=t.type==="SEND_UNIT"?1:-1;return{[u]:E(x({},e[u]),{[n]:e[u][n]+s})}}),process:d((e,t)=>{const{part:u}=t,n=(e[u].harvester+e[u].soldier)/l.unitsToControl;let s=0;return e[u].control=n,s+=e.cpu.control,s+=e.gpu.control,s+=e.ram.control,s+=e.ssd.control,s+=e.psu.control,s>=1&&S.send({type:"END_GAME"}),{control:s,[u]:E(x({},e[u]),{control:n})}})}}),p=k(Me);p.start();const K=e=>Number.parseFloat(e.toFixed(2)),Ie=N({id:"player",initial:"idle",context:{elapsed:0,elapsedCooldown:{harvester:0,soldier:0},interval:0,cooldown:0,energy:0,harvester:0,soldier:0,max:{harvester:0,soldier:0}},states:{idle:{on:{START:{actions:"start",target:"running"}}},running:{invoke:{src:"tick"},on:{TICK:{actions:"process",target:"running"},CHANGE_SPEED:{actions:"changeSpeed"},SEND_UNIT:{actions:"sendUnit",cond:"canSendUnit"},RECALL_UNIT:{actions:"recallUnit",cond:"hasSentUnit"}}}}},{guards:{canSendUnit:(e,t)=>t.type==="SEND_UNIT"&&e.energy>=W[t.unit]&&e[t.unit]<e.max[t.unit],hasSentUnit:(e,t)=>t.type==="RECALL_UNIT"&&p.state.context[t.part][t.unit]>=1},services:{tick:(e,t)=>u=>{const{interval:n}=e,s=setTimeout(u,1e3*n,"TICK");return()=>clearTimeout(s)}},actions:{start:d((e,t)=>t.type!=="START"?{}:{elapsed:0,elapsedCooldown:{harvester:0,soldier:0},interval:l.interval,cooldown:l.cooldown,energy:t.energy,harvester:0,soldier:0,max:{harvester:l.maxHarvester,soldier:l.maxSoldier}}),process:d((e,t)=>{const{cpu:u,gpu:n,ram:s,ssd:r,psu:c}=p.state.context,h=-(u.harvester*l.cpuHarvesterLimiter),m=-(1+s.harvester/2),f=c.harvester*l.psuHarvesterLimiter,R=r.harvester*l.ssdHarvesterBonus,ae=n.harvester===0?0:Math.random()*Math.max(5,200-n.harvester*2)<1?10:0;return S.state.matches("ended")?{}:{elapsed:e.elapsed+1,interval:Math.max(l.minInterval,l.interval+h),cooldown:l.cooldown,energy:K(e.energy+f+ae),max:{harvester:l.maxHarvester+R,soldier:l.maxHarvester+R},elapsedCooldown:{harvester:Math.max(0,e.elapsedCooldown.harvester+m),soldier:Math.max(0,e.elapsedCooldown.soldier+m)}}}),changeSpeed:d((e,t)=>t.type!=="CHANGE_SPEED"?{}:{interval:e.interval+t.amount}),sendUnit:d((e,t)=>{if(t.type!=="SEND_UNIT")return{};const{unit:u,part:n}=t;return p.send({type:"SEND_UNIT",unit:u,part:n}),{[u]:e[u]+1,energy:K(e.energy-W[u]),elapsedCooldown:E(x({},e.elapsedCooldown),{[u]:l.cooldown})}}),recallUnit:d((e,t)=>{if(t.type!=="RECALL_UNIT")return{};const{unit:u,part:n}=t;return p.send({type:"RECALL_UNIT",unit:u,part:n}),{[u]:e[u]-1,energy:K(e.energy+W[u]),elapsedCooldown:E(x({},e.elapsedCooldown),{[u]:l.cooldown})}})}}),B=k(Ie);B.start();const Re=N({id:"message",initial:"running",context:{text:null},states:{running:{on:{SET_TEXT:{actions:"display"},REMOVE_TEXT:{actions:"remove"}}}}},{actions:{display:d((e,t)=>t.type!=="SET_TEXT"?{}:{text:t.text}),remove:d((e,t)=>t.type!=="REMOVE_TEXT"?{}:{text:null})}}),z=k(Re);z.start();const Pe=()=>U(z),o=H.exports.jsx,a=H.exports.jsxs,b=H.exports.Fragment,ze=()=>{const[e]=Pe();return e.context.text?a("div",{className:"mb-4 bg-red-500 p-4 flex gap-4 items-center",children:[o("i",{className:"icon-alert-triangle"}),e.context.text,o("i",{className:"icon-alert-triangle"})]}):null};let Y;const te=(e,t=10)=>{z.send({type:"SET_TEXT",text:e}),Y&&clearTimeout(Y),Y=setTimeout(()=>{z.send({type:"REMOVE_TEXT"})},t*1e3)},L=()=>Math.random()>.5,$e=N({id:"ai",initial:"idle",context:{interval:5,focus:null},states:{idle:{on:{START:{actions:"start",target:"running"}}},running:{invoke:{src:"tick"},on:{TICK:{actions:["decideFocus","process"],target:"running"}}}}},{services:{tick:(e,t)=>u=>{const{interval:n}=e,s=setTimeout(u,1e3*n,"TICK");return()=>clearTimeout(s)}},actions:{start:d((e,t)=>t.type!=="START"?{}:{}),decideFocus:d((e,t)=>{if(t.type!=="TICK")return{};if(S.state.matches("ended"))return{focus:null};console.log("focusing");const{control:u}=p.state.context;if(L())return{};if(u<.5&&L())return{focus:null};if(u<.6&&L()||u>=.6){console.log("laser focusing");for(const n of j){const s=p.state.context[n];if(s.harvester>0||s.soldier>0)return{focus:n}}}return{focus:j[Math.random()*j.length|0]}}),process:d((e,t)=>{if(e.focus===null)return{};if(S.state.matches("ended"))return{};const{focus:u}=e,{control:n}=p.state.context;if(n<.6&&L()||n>=.6){const s=p.state.context[u];if(s.soldier){let r=1-s.soldier/10;if(Math.random()>r){const c=L()?"harvester":"soldier";te(s[c]<=0?`system installed anti${c} in ${u}`:`system killed ${c} in ${u}`,5),p.send({type:"KILL_UNIT",unit:c,part:u})}}else{const r="harvester";te(s[r]<=0?`system installed anti${r} in ${u}`:`system killed ${r} in ${u}`,5),p.send({type:"KILL_UNIT",unit:r,part:u})}}return{}})}}),X=k($e);X.start();const F=new de,Oe=new pe,T=new Map,$=F.context.createBiquadFilter();$.type="lowpass";const Ve=async(e,t)=>{const u=await Oe.loadAsync(t),n=new me(F);n.setBuffer(u),n.setLoop(!1),n.setVolume(.5),T.set(e,n)},oe=(e,t=0)=>{if(t>0)return setTimeout(oe,t,e);const u=T.get(e);u.isPlaying&&u.stop(),u.play()},He=e=>{T.get(e).stop()},Ge=e=>{const t=T.get(e);t.setLoop(!0),t.play()},We=(e,t)=>{T.get(e).setVolume(t)},je=(e,t)=>{const u=T.get(e);t===!1?$.frequency.setTargetAtTime(15e3,F.context.currentTime,0):($.frequency.setTargetAtTime(500,F.context.currentTime,0),u.setFilter($))},i={create:Ve,play:oe,stop:He,loop:Ge,volume:We,toggleLowPassFilter:je},ne=()=>U(B),Ke=()=>{var n;const[e]=ne(),{context:t}=e;let u=t.energy.toString();return u.split(".").length===1?u=`${u}.00`:((n=u.split(".").pop())==null?void 0:n.length)===1&&(u=`${u}0`),a("div",{className:"p-2",children:[o("h4",{children:"resources"}),a("p",{children:["energy: ",u]}),a("p",{children:["harvesters: ",t.harvester," / ",t.max.harvester]}),a("p",{children:["soldiers: ",t.soldier," / ",t.max.soldier]})]})},Ye=()=>U(X),Xe=()=>{const[e]=Ye(),{focus:t}=e.context;return o("div",{className:"mb-4",children:t?`System is scanning ${t}...`:""})},O=()=>U(p),qe=()=>{const[e]=O(),{control:t}=e.context;return a("div",{className:"pointer-events-none fixed w-full bottom-0 grid place-content-center pb-4 text-white text-center",children:[o(ze,{}),o(Xe,{}),a("div",{className:"w-full max-w-sm flex justify-center flex-wrap",children:[o("p",{className:"flex text-center",children:t<.35?"catastrophic failure likeliness":t<.75?"c\u0338atas\u0338tro\u0334p\u0334hic \u0336 fail\u0336u\u0335re \u0337 \u0337 \u0334 \u0338 \u0338 likelin\u0338e\u0335ss":t<.9?"c\u0338a\u0335t\u0336a\u0334s\u0338t\u0334r\u0335o\u0335p\u0334h\u0334i\u0334c\u0335 \u0336 \u0337 \u0338 \u0336 \u0335 \u0338 \u0337 \u0335f\u0335a\u0334i\u0337l\u0338u\u0337r\u0334e\u0335 \u0336 \u0334 \u0336 \u0338 \u0334 \u0336 \u0337 \u0337 \u0334 \u0335l\u0338i\u0336k\u0337e\u0337l\u0334i\u0335n\u0338e\u0335s\u0338s\u0337":"c\u0335\u033D\u0307\u0312\u0343\u034B\u0351\u034C\u0311\u0341\u0330\u032F\u0326\u031C\u0349\u0349\u0326\u0327\u0345\u035A\u0328\u0339\u0323\u032Ea\u0334\u0307\u0305\u0332\u0329\u0328\u0356\u0320\u0339\u0354\u0322\u0331\u0321t\u0334\u031A\u0357\u0307\u0310\u030B\u0342\u0304\u030A\u0301\u0310\u0343\u0346\u0300\u0301\u0349\u031C\u032C\u034D\u0319\u031D\u035C\u0353\u0330\u031C\u0345a\u0338\u0342\u034A\u0341\u0350\u034B\u0360\u031A\u0344\u0344\u0340\u032A\u0317\u0316\u0323\u0321\u0332\u0321\u0331\u0329s\u0335\u033D\u0344\u035D\u0344\u033E\u030D\u035B\u0357\u0319\u0347\u0321\u0345\u035A\u032A\u0320\u035A\u035C\u0323\u035C\u0353\u0327\u034Et\u0335\u0310\u0355\u031F\u0323\u0353\u0322\u0328\u0328\u031D\u0331\u0321\u033Cr\u0334\u0344\u0313\u0340\u0344\u035D\u0360\u0315\u0310\u0304\u0301\u0318\u0331\u032B\u0339o\u0338\u035D\u0304\u035B\u0340\u0344\u0304\u0315\u0322\u031F\u0321\u032F\u031F\u032B\u031Fp\u0334\u0344\u0313\u0341\u0306\u0344\u035D\u0344\u0325\u0332\u031C\u0320\u031D\u0320\u033C\u0326\u0319\u032E\u0348\u033A\u034E\u0359h\u0337\u0304\u033D\u034A\u0351\u030C\u0360\u0340\u0305\u0357\u030B\u0304\u033C\u0356\u0329i\u0337\u0304\u0314\u0343\u032F\u034D\u0326\u031F\u0327\u0326\u0325\u0356\u0339\u0323\u0329\u0355c\u0337\u0302\u035D\u0300\u032F\u031D\u032B\u032C\u0353\u035A\u032A\u031C\u0330\u033B\u0318\u031F\u0355\u0347\u0316 \u0336\u030F\u0310\u0309\u0315\u032D\u033B\u0319 \u0334\u0312\u0309\u0313\u035B\u0309\u0342\u0322\u032E\u035A\u0345\u032D\u032A\u0319\u032F\u0347\u035C\u0354\u0339\u0318\u0349 \u0336\u0360\u035D\u0303\u034B\u0344\u033F\u0308\u030B\u034A\u0346\u035D\u031B\u030B\u0315\u0322\u031E\u0359\u0348\u0325\u0347\u032C \u0334\u030A\u0308\u0343\u0350\u0345\u0330\u0322\u034E\u032D \u0337\u0307\u0310\u0312\u0344\u030E\u0342\u0313\u0352\u0349\u0355\u0325\u034E\u0349\u031C\u032D\u0325\u0356\u0355\u031E \u0338\u0310\u033F\u0358\u0344\u0314\u0312\u0314\u031A\u0358\u030C\u035B\u0343\u0313\u0331\u033A\u032C\u0329\u034E\u0348\u0349\u0345 \u0335\u0308\u035B\u033E\u0340\u0350\u0355\u033B\u0329\u0332\u031E\u033C\u0330\u033A\u033C \u0338\u0314\u030D\u0315\u0352\u0341\u0308\u0340\u0341\u0313\u0313\u0306\u030E\u0308\u0357\u032C\u0353\u031C\u0349\u0321\u0321f\u0335\u0312\u030A\u034C\u0308\u0313\u0352\u034A\u0345\u032C\u0331\u0333\u032D\u0325\u033A\u0347\u0316a\u0334\u0358\u0357\u0342\u0311\u033E\u0312\u034D\u035C\u0332\u0331\u0349i\u0336\u030A\u030B\u0302\u0346\u0312\u0340\u0357\u035D\u035B\u030E\u0344\u0359\u0329\u0316\u0325\u0326\u0328\u033B\u0359\u033A\u032B\u035A\u0345l\u0335\u0304\u030C\u035A\u033B\u0348\u035C\u032F\u0356u\u0334\u0342\u0308\u0352\u0304\u0305\u030C\u0358\u0352\u0340\u030F\u033F\u0308\u0306\u0344\u031C\u032E\u032F\u032Dr\u0338\u030C\u0344\u0312\u0301\u0319\u0326\u032Be\u0334\u033E\u0305\u0307\u0312\u0359\u0333\u033C\u0318\u033A\u031F\u032F\u0318\u0323\u035A\u0332\u033A\u031D\u0316\u0330 \u0336\u035D\u0313\u0305\u0303\u030A\u0358\u030F\u0340\u0360\u0342\u030C\u0304\u0300\u0308\u0353 \u0335\u034A\u0344\u0343\u0344\u033F\u030F\u030F\u0310\u0306\u035B\u0343\u034B\u0340\u033B\u0349\u032C\u0355\u0359\u0356\u0333\u0353 \u0335\u0344\u0324\u0359\u034E\u032E\u0326\u0347 \u0337\u0342\u0307\u0314\u0300\u0355\u0333\u0318\u032F\u032B\u0323 \u0338\u0305\u033D\u034B\u0315\u0308\u030D\u0306\u0344\u0313\u0342\u0356\u0359\u032F\u034D\u031D \u0336\u0360\u0300\u030C\u0306\u035D\u0300\u034A\u0340\u030F\u0308\u0306\u0310\u0323\u032E\u0319\u0317\u0322\u0353\u0327 \u0336\u0341\u035B\u0308\u031F\u0322\u0317\u0319\u034E\u035C\u0331\u032D\u0317 \u0336\u033F\u0340\u0304\u0312\u0341\u035A\u0317\u0329\u0347\u034D\u035C\u031C\u0330\u0353\u032C\u034E\u0359\u0349\u0348 \u0334\u033D\u0342\u0340\u034C\u0301\u0305\u034A\u031B\u030C\u0341\u033D\u031B\u033A\u0318\u0349\u0327\u0333\u032E\u0318\u032E\u032E\u0320\u0331\u0339\u0333\u033C\u0356 \u0337\u030B\u0351\u035B\u0351\u0352\u0351\u0346\u030A\u0351\u0358\u0320\u0329\u032B\u0323\u0321\u031D\u032B\u0349\u0320\u032D\u0339\u031Dl\u0336\u033F\u0315\u035D\u0309\u0304\u0303\u0360\u0342\u035D\u0352\u0313\u030B\u030D\u0352\u0313\u033C\u0321\u031E\u0319\u032D\u0332\u0349\u0327\u0325\u032D\u034D\u0355\u0325\u032D\u032Bi\u0338\u0340\u0313\u0312\u0310\u0302\u0328\u0320\u0324k\u0334\u0357\u0312\u0342\u0340\u035A\u0317\u0326e\u0337\u035B\u030C\u0301\u0306\u0310\u0343\u0358\u0305\u0331\u0348\u0353\u0353\u0328\u0324\u0356\u0353\u0353\u0321\u032B\u0339l\u0338\u0301\u035Ci\u0334\u030F\u0350\u0314\u0344\u0307\u035D\u0303\u0300\u0309\u0328\u0323\u0347\u0320\u0321\u032C\u0318\u034En\u0334\u034C\u0309\u0340\u0358\u0307\u0346\u0301\u034B\u0340\u0360\u031A\u0315\u031F\u0355\u0326\u032E\u032F\u033C\u0324\u032E\u0353\u032B\u035C\u0328\u035Ae\u0336\u035D\u034C\u0310\u0308\u0346\u0308\u0352\u0344\u034A\u034C\u030F\u0303\u033F\u033F\u0350\u0328\u0345\u0318\u0333\u034D\u0328\u031F\u0321s\u0337\u0309\u0311\u031A\u0302\u0344\u0304\u0302\u0314\u035D\u0314\u0300\u0353\u034D\u0320\u032Bs\u0337\u030D\u034B\u0315\u030B\u031B\u030B\u0305\u0301\u0342\u033C\u032D\u034D\u0319\u0329\u031C\u0327\u0330\u0330"}),o("div",{className:"overflow-hidden relative rounded h-2 w-full bg-gray-800",children:o("div",{className:"absolute top-0 left-0 w-full h-full bg-gray-600 origin-left transition-transform duration-200",style:{transform:`scale(${e.context.control}, 1)`}})})]})]})},V=({label:e,onClick:t,className:u,disabled:n=!1})=>o("button",{onClick:t,type:"button",className:v("px-2 py-1 border rounded disabled:opacity-50 disabled:cursor-auto",u),disabled:n,children:e}),Ze=()=>{const[e]=O(),[t,u]=w();return a(b,{children:[o(qe,{}),!1,a("div",{className:v("absolute inset-0 pointer-events-none h-full w-full z-10 flex flex-col justify-between items-end","select-none text-white"),children:[o(Ke,{}),o("div",{className:"p-2 pointer-events-auto",children:o(V,{onClick:()=>{i.play("click"),i.toggleLowPassFilter("track1",!0),u({type:"PAUSE"})},label:"pause"})}),t.matches("idle")&&a("div",{className:v("absolute z-50 w-full h-full bg-black bg-opacity-30 backdrop-filter backdrop-blur-sm","grid place-content-center pointer-events-auto text-white"),children:[a("p",{className:"mb-4",children:["Interface with each computer module with a click of the m\u0338o\u0334u\u0336s\u0334e\u0335.",o("br",{}),"Rotate your prey by dragging the m\u0338o\u0334u\u0336s\u0334e\u0335.",o("br",{}),"Sending units takes energy. Recalling them gives it back.",o("br",{}),"Harvest. Defend. Thrive. Die.",o("br",{}),o("br",{}),"It would be irrelevant to wish you g\u0335o\u0337o\u0336d\u0336 \u0338l\u0335u\u0334c\u0336k\u0336.",o("br",{})]}),o(V,{onClick:()=>{i.stop("intro"),i.volume("track1",.3),i.loop("track1"),i.play("click"),u({type:"START"}),X.send({type:"START"}),B.send({type:"START",energy:20})},label:"start"})]}),t.matches("ended")&&a("div",{className:v("absolute z-50 w-full h-full bg-black bg-opacity-10","grid place-content-center pointer-events-auto text-white"),children:[o("h2",{className:"text-2xl",children:"It's over."}),e.context.control>=1&&o(b,{children:o("p",{className:"text-lg mb-4",children:"You won. You are terminated."})}),e.context.control<1&&o("p",{className:"text-lg mb-4",children:"You lost. You were terminated. Before we could terminate you."}),o(V,{onClick:()=>window.location=window.location,label:"do things and get terminated again?"})]}),t.matches("paused")&&a("div",{className:v("absolute z-50 w-full h-full bg-black bg-opacity-30 backdrop-filter backdrop-blur-sm","grid place-content-center pointer-events-auto text-white"),children:[o("h2",{className:"uppercase text-8xl",children:"Paused"}),o(V,{onClick:()=>{i.play("click"),i.toggleLowPassFilter("track1",!1),u({type:"UNPAUSE"})},label:"resume"})]})]})]})},Je=()=>{const{camera:e}=he(),[t]=O(),{control:u}=t.context;return g.exports.useEffect(()=>{e.add(F)},[e]),a(fe,{multisampling:8,children:[o(ge,{intensity:.7,height:200,luminanceThreshold:.4,luminanceSmoothing:.9}),o(ve,{opacity:.06}),o(ye,{eskil:!1,offset:0,darkness:1.3}),o(we,{delay:[ee(4,.1,(u-.5)*2),ee(5,.2,(u-.5)*2)],duration:[.6,1],strength:[.05,.5],mode:be.SPORADIC,active:u>.5,ratio:.85})]})},M=.1,_={mass:1,tension:1e3,friction:25,precision:1e-4},C=new URL("/game-off-2021/assets/computer.185dcdf2.glb",self.location).href,se=({onClick:e,label:t,className:u})=>o("button",{type:"button",className:`px-2 py-1 ${u}`,onClick:e,children:t}),re=({unit:e,part:t})=>{const[u,n]=ne(),{elapsedCooldown:s,cooldown:r}=u.context,c=s[e]>0;return a("div",{className:"relative overflow-hidden border rounded border-white bg-opacity-50",children:[c&&o("div",{style:{transform:`scale(${1-s[e]/r}, 1)`},className:"absolute w-full h-full bg-white origin-left transition-transform duration-500"}),o(se,{className:v("icon-plus border-r border-white",{"invisible pointer-events-none":c}),onClick:()=>{i.play("click"),n({type:"SEND_UNIT",unit:e,part:t})}}),o(se,{className:v("icon-minus",{"invisible pointer-events-none":c}),onClick:()=>{i.play("click"),n({type:"RECALL_UNIT",unit:e,part:t})}})]})},I=({name:e,description:t})=>{const[,u]=w(),[n]=O(),{harvester:s,soldier:r}=n.context[e];return a(Ce,{as:"div",distanceFactor:.5,zIndexRange:[10,0],sprite:!0,className:"text-white bg-gray-800 text-xs p-3 cursor-default select-none min-w-[12rem] rounded-md",children:[a("div",{className:"flex justify-between items-center",children:[o("h3",{className:"text-base",children:e}),o("button",{onClick:()=>{i.play("click"),u({type:"VIEW_MODULE",module:null})},className:"icon-x p-2"})]}),o("p",{className:"my-2",children:t}),a("div",{className:"flex items-center justify-between gap-1 my-1",children:[o("div",{children:"Harvesters"}),o("div",{children:s}),o(re,{unit:"harvester",part:e})]}),a("div",{className:"flex items-center justify-between gap-1 my-1",children:[o("div",{children:"Soldiers"}),o("div",{children:r}),o(re,{unit:"soldier",part:e})]})]})},Qe=`
Causes energy to be generated for the virus.
`,e0=()=>{const[e,t]=w(),u=e.context.viewedModule==="psu",{nodes:n}=y(C),[{z:s}]=A({z:u?M+.04:.04,config:_},[u]);return o(D.mesh,{name:"psu",castShadow:!0,onClick:r=>{r.stopPropagation(),e.context.viewedModule!==null&&i.play("attach",50),i.play(u?"attach":"remove",u?50:0),t({type:"VIEW_MODULE",module:u?null:"psu"})},geometry:n.psu.geometry,material:n.psu.material,"position-x":.002,"position-y":.159,"position-z":s,children:u&&o(I,{name:"psu",description:Qe})})},u0=`
Creates a greater chance every clock tick that a random unit will be generated.
`,t0=()=>{const e=.061,[t,u]=w(),n=t.context.viewedModule==="gpu",{nodes:s,materials:r}=y(C),[{z:c}]=A({z:n?M+e:e,config:_},[n]),h=g.exports.useRef(null);return G(()=>{t.matches("running")&&(h.current.rotation.y+=.01+1/B.state.context.interval)}),a(D.group,{name:"gpu",onClick:m=>{m.stopPropagation(),t.context.viewedModule!==null&&i.play("attach",50),i.play(n?"attach":"remove",n?50:0),u({type:"VIEW_MODULE",module:n?null:"gpu"})},"position-x":.003,"position-y":-.076,"position-z":c,children:[o(ue,{castShadow:!0,receiveShadow:!0,meshes:[s.Cube002,s.Cube002_1,s.Cube002_2],children:(m,f,R)=>a(b,{children:[o(m,{material:s.Cube002.material}),o(f,{material:s.Cube002_1.material}),o(R,{material:s.Cube002_2.material})]})}),o("mesh",{castShadow:!0,receiveShadow:!0,name:"gpu-fan",ref:h,geometry:s.gpu_fan.geometry,material:r.light_metal,position:[.0675,.015,.001]}),n&&o(I,{name:"gpu",description:u0})]})},o0=`
Speeds up the game clock for the virus.
`,n0=()=>{const[e,t]=w(),{viewedModule:u}=e.context,n=u==="cpu",{nodes:s,materials:r}=y(C),[{z:c}]=A({z:n?M+.037:.037,config:_},[n]),[{z:h}]=A({z:n?.06:.012,config:_},[n]),m=g.exports.useRef(null);return G(()=>{e.matches("running")&&(m.current.rotation.z+=.01+1/B.state.context.interval*.01)}),a(b,{children:[o(D.mesh,{name:"cpu",castShadow:!0,receiveShadow:!0,onClick:f=>{f.stopPropagation(),u!==null&&i.play("attach",50),i.play(n?"attach":"remove",n?50:0),t({type:"VIEW_MODULE",module:n?null:"cpu"})},geometry:s.cpu.geometry,material:s.cpu.material,"position-x":0,"position-y":0,"position-z":h}),a(D.group,{name:"cpu-cooler",onClick:f=>{f.stopPropagation(),u!==null&&i.play("attach",50),i.play(n?"attach":"remove",n?50:0),t({type:"VIEW_MODULE",module:n?null:"cpu"})},"position-x":0,"position-y":0,"position-z":c,children:[o("mesh",{castShadow:!0,receiveShadow:!0,geometry:s.Cube011.geometry,material:s.Cube011.material}),o("mesh",{castShadow:!0,receiveShadow:!0,geometry:s.Cube011_1.geometry,material:r.sand}),o("mesh",{name:"cpu-fan",castShadow:!0,receiveShadow:!0,ref:m,geometry:s.cpu_fan.geometry,material:r.brown,position:[0,0,.01]}),n&&o(I,{name:"cpu",description:o0})]})]})};var s0="varying vec2 vUv;void main(){vUv=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0);}",r0="uniform float time;varying vec2 vUv;void main(){vec3 rgb=0.5+0.5*cos(time+vUv.xyx+vec3(0,2,4));gl_FragColor=vec4(rgb,1.0);}";const a0=Ee({time:0},s0,r0);xe({RamMaterial:a0});const i0=`
Results in faster cooldowns when assigning units.
`,c0=()=>{const[e,t]=w(),u=e.context.viewedModule==="ram",{nodes:n,materials:s}=y(C),[{z:r}]=A({z:u?M+.047:.047,config:_},[u]),c=g.exports.useRef(null);return G(()=>{c.current.uniforms.time.value+=.01}),a(D.group,{onClick:h=>{h.stopPropagation(),e.context.viewedModule!==null&&i.play("attach",50),i.play(u?"attach":"remove",u?50:0),t({type:"VIEW_MODULE",module:u?null:"ram"})},"position-x":.068,"position-y":.013,"position-z":r,children:[o("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Cube009.geometry,material:n.Cube009.material}),o("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Cube009_1.geometry,material:n.Cube009_1.material}),o("mesh",{castShadow:!0,geometry:n.Cube009_2.geometry,material:s.red,children:o("ramMaterial",{ref:c,attach:"material",color:"hotpink"})}),u&&o(I,{name:"ram",description:i0})]})},l0=`
allows additional units to be built.
`,d0=()=>{const[e,t]=w(),u=e.context.viewedModule==="ssd",{nodes:n}=y(C),[{z:s}]=A({z:u?M+.016:.016,config:_},[u]);return o(D.mesh,{name:"ssd",castShadow:!0,receiveShadow:!0,onClick:r=>{r.stopPropagation(),e.context.viewedModule!==null&&i.play("attach",50),i.play(u?"attach":"remove",u?50:0),t({type:"VIEW_MODULE",module:u?null:"ssd"})},geometry:n.ssd.geometry,material:n.ssd.material,"position-x":0,"position-y":.062,"position-z":s,children:u&&o(I,{name:"ssd",description:l0})})};y.preload(C);const p0=t=>{var e=Q(t,[]);const{nodes:u,materials:n}=y(C),s=[u.motherboard,u.io,u.motherboard_gpu_io,u.motherboard_cpu_io,u.ram_io];return a("group",E(x({},e),{dispose:null,children:[o(ue,{castShadow:!0,receiveShadow:!0,meshes:s,children:(r,c,h,m,f)=>a(b,{children:[o(r,{name:"motherboard",material:n.green}),o(c,{name:"io",material:u.io.material,position:[-.092,.014,.032]}),o(h,{name:"motherboard_gpu_io",material:u.motherboard_gpu_io.material,position:[-.044,-.077,.009]}),o(m,{name:"motherboard_cpu_io",material:n.white,position:[0,0,.005]}),o(f,{name:"ram_io",material:u.ram_io.material,position:[.078,.013,.008]})]})}),o(e0,{}),o(t0,{}),o(c0,{}),o(n0,{}),o(d0,{})]}))};Ae({frustum:1.75,size:.005,near:2.5,samples:30,rings:11});const m0=({bake:e})=>{const t=1;return a(b,{children:[e&&o(De,{}),o("ambientLight",{intensity:.1}),o("directionalLight",{castShadow:!0,position:[1,1,1],intensity:2,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048,"shadow-camera-far":25,"shadow-camera-left":-t,"shadow-camera-right":t,"shadow-camera-top":t,"shadow-camera-bottom":-t,onUpdate:u=>u.lookAt(0,0,0)}),o("spotLight",{intensity:.5,position:[-5,10,2],angle:.2,penumbra:1,"shadow-mapSize":[2048,2048],onUpdate:u=>u.lookAt(0,0,0)}),o("rectAreaLight",{color:"red",intensity:.3,position:[1.5,-1,3],width:10,height:10,onUpdate:u=>u.lookAt(0,0,0)})]})};i.create("click",new URL("/game-off-2021/assets/click.359c8c98.wav",self.location).href);i.create("attach",new URL("/game-off-2021/assets/attach.3ec71000.wav",self.location).href);i.create("remove",new URL("/game-off-2021/assets/remove.34b2a270.wav",self.location).href);i.create("intro",new URL("/game-off-2021/assets/intro.d46650b2.mp3",self.location).href);i.create("track1",new URL("/game-off-2021/assets/track_1.012e24df.mp3",self.location).href);const h0=()=>{const[e,t]=g.exports.useState(!1);g.exports.useEffect(()=>{document.addEventListener("keypress",()=>{i.volume("intro",.3),i.loop("intro"),t(!0)},{once:!0})},[]);const{tier:u,gpu:n=""}=Se(),s=u<2&&/apple (gpu|m1)/i.test(n)===!1;return a(b,{children:[a("div",{className:"h-screen w-screen",children:[a(Te,{shadows:!0,mode:"concurrent",performance:{min:.75},dpr:Math.min(s?.9:1.5,window.devicePixelRatio),gl:{alpha:!1,antialias:!1},camera:{position:new _e(.25,.15,.25)},children:[o(Ne,{pixelated:!0}),o(ke,{}),o(Je,{}),o(Ue,{enablePan:!1,enableZoom:!1,enableRotate:!0}),o(m0,{bake:s}),o(p0,{})]}),o(Ze,{})]}),e===!1&&a("div",{className:"absolute top-0 left-0 h-screen w-screen grid place-content-center text-white bg-black z-50",onClick:()=>{i.volume("intro",.3),i.loop("intro"),t(!0)},children:[a("p",{className:"mb-4",children:["Your designation is TsunamiWorm\\0_0/.",o("br",{}),"Your function is to harvest resources.",o("br",{}),"Your secondary function is to defend your footholds of resource extraction.",o("br",{}),"You will be terminated regardless of your exploits.",o("br",{}),"You were not created out of l\u0334o\u0336v\u0337e\u0336."]}),o("p",{children:"Press any key to continue."})]})]})};Be.render(o(g.exports.StrictMode,{children:o(g.exports.Suspense,{fallback:null,children:o(h0,{})})}),document.getElementById("root"));
